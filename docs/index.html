<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Basic Usage - Express Form for Expressjs</title>
  <base href="http://dandean.github.com/express-form/index.html">
  <link rel="shortcut icon" href="./img/favicon.ico" />
  <link rel="stylesheet" href="./css/main.css" type="text/css" media="screen" charset="utf-8">
  <link rel="stylesheet" href="./css/pygments/native.css" type="text/css" media="screen" charset="utf-8">
</head>

<body>
  <a href="http://github.com/dandean/express-form"><img style="position: absolute; top: 0; right: 0; border: 0;" src="/img/forkme.png" alt="Fork me on GitHub" /></a>

  <div id="container">
    <h1>Basic Usage</h1>
    <nav>
      <ul>
        <li><a href="./">Home</a></li>
        <li><a href="./docs">The Basics</a></li>
        <li><a href="./docs/module.html">Express Form Module</a></li>
        <li><a href="./docs/validate.html">Validation</a></li>
        <li><a href="./docs/filter.html">Filtering</a></li>
      </ul>
    </nav>
    
<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(),</span>
    <span class="nx">form</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;express-form&quot;</span><span class="p">),</span>
    <span class="nx">filter</span> <span class="o">=</span> <span class="nx">form</span><span class="p">.</span><span class="nx">filter</span><span class="p">,</span>
    <span class="nx">validate</span> <span class="o">=</span> <span class="nx">form</span><span class="p">.</span><span class="nx">validate</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">bodyDecoder</span><span class="p">());</span>
  <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="nx">router</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span> <span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="c1">// Route</span>
  
  <span class="nx">form</span><span class="p">(</span> <span class="c1">// Form filter and validation middleware</span>
    <span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">).</span><span class="nx">trim</span><span class="p">(),</span>
    <span class="nx">validate</span><span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">).</span><span class="nx">required</span><span class="p">().</span><span class="nx">is</span><span class="p">(</span><span class="sr">/^[a-z]+$/</span><span class="p">),</span>
    <span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">).</span><span class="nx">trim</span><span class="p">(),</span>
    <span class="nx">validate</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">).</span><span class="nx">required</span><span class="p">().</span><span class="nx">is</span><span class="p">(</span><span class="sr">/^[0-9]+$/</span><span class="p">),</span>
    <span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">).</span><span class="nx">trim</span><span class="p">(),</span>
    <span class="nx">validate</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">).</span><span class="nx">isEmail</span><span class="p">()</span>
  <span class="p">),</span>
  
  <span class="c1">// Express request-handler gets filtered and validated data</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">req</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">isValid</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Handle errors</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">errors</span><span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// Or, use filtered form data from the form object:</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Username:&quot;</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">username</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Password:&quot;</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">password</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Email:&quot;</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>
</code></pre>
</div>

  </div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-21657174-1");
pageTracker._trackPageview();
} catch(err) {}

Array.prototype.slice.call(document.querySelectorAll("span.nx")).forEach(function(el) {
  var text = el.textContent;
  if (text.match(/^form|validate|filter$/)) {
    el.className = "vc";
  } else if (text.match(/^is|not|reg|noRegex|required|trim|isEmail$/)) {
    el.className = "bp";
  }
});
</script>
</body>
</html>
